@model Protocolo.Models.SearchFlow

<div id="graficoFluxoProcesso" aria-hidden="true">
    <div class="modal-dialog" style="min-width: 1070px;">
        <div id="graficoFluxoProcessoContent" class="modal-content" style="border: none; overflow-y: auto;">
            <div class="modal-body">

                <div class="col-md-12" style="margin-bottom: 30px;">

                    <table class="table">
                        <tr>
                            <td class="grid-report text-center" style="border: none; border-bottom: 1px solid #000;">
                                @if (Model.Instituicao == null)
                                {
                                    <h3>Gráfico do Fluxo do Processo</h3>
                                }
                                else
                                {
                                    <img src="~/Instituicao/ViewLogomarca" width="85" height="90" alt="Logomarca" title="Logomarca" style="float: left;" />
                                    <div style="width: 900px;">
                                        <h2>@Html.Raw(Model.Instituicao.Nome)</h2>

                                        <h3>Gráfico do Fluxo do Processo</h3>
                                    </div>
                                }
                            </td>
                        </tr>
                    </table>

                </div>

                <div class="col-md-12" style="margin-bottom: 15px; margin-top: -15px;">
                    <table class="table table-condensed" style="border: 1px solid #000;">
                        <tr>
                            <td style="border-bottom: none; border-top: 1px solid #000; width: 200px;">N° Processo</td>
                            <td style="border-bottom: none; border-top: 1px solid #000;">@Html.Raw(Model.NumeroAno)</td>
                        </tr>
                        <tr>
                            <td style="border-bottom: none; border-top: none;">Tipo de Documento</td>
                            <td style="border-bottom: none; border-top: none;">@Html.Raw(Model.TipoDocumento)</td>
                        </tr>
                        <tr>
                            <td style="border-bottom: none; border-top: none;">Assunto</td>
                            <td style="border-bottom: none; border-top: none;">@Html.Raw(Model.Assunto)</td>
                        </tr>
                        <tr>
                            <td style="border-top: none;">Requerente</td>
                            <td style="border-top: none;">@Html.Raw(Model.Requerente)</td>
                        </tr>
                    </table>
                </div>

                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <ol class="timeline">
                                @{
                                    var count = Model.FluxoProtocolo.Count;
                                    string cssClass;

                                    for (int i = 0; i < count; i++)
                                    {
                                        // o elemento não é unico
                                        if (i == 0 && count > 1)
                                        {
                                            cssClass = "timeline__step-first";
                                        }
                                        // testa se é o último elemento
                                        else if (count > 1 && i == count - 1)
                                        {
                                            cssClass = "timeline__step-last";
                                        }
                                        else
                                        {
                                            cssClass = string.Empty;
                                        }

                                        <li class="timeline__step @cssClass">
                                            <span class="timeline__step-title">
                                                @Model.FluxoProtocolo[i].Setor.Nome
                                            </span>

                                            <span class="timeline__step-subtitle">
                                                @Model.FluxoProtocolo[i].TempoMedio dia(s)
                                            </span>

                                            <i class="timeline__step-marker"></i>
                                        </li>
                                    }
                                }
                            </ol>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>